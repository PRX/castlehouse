<clickhouse>
    <logger>
        <level>debug</level>
        <console>true</console>
    </logger>

    <http_port>8123</http_port>
    <tcp_port>9000</tcp_port>
    <mysql_port>9004</mysql_port>

    <path>./</path>

    <mlock_executable>true</mlock_executable>

    <users>
        <default>
            <password/>

            <networks>
                <ip>::/0</ip>
            </networks>

            <profile>default</profile>
            <quota>default</quota>

            <access_management>1</access_management>
            <named_collection_control>1</named_collection_control>
        </default>
    </users>

    <quotas>
        <default/>
    </quotas>

    <!-- custom stuff... everything above this line was copied from defaults -->
    <!-- TODO: is there a better way to extend config locally? -->
    <timezone>UTC</timezone>

    <url_scheme_mappers>
        <gs>
            <from>gs://{bucket}/</from>
            <to>https://storage.googleapis.com/{bucket}</to>
        </gs>
    </url_scheme_mappers>

    <s3>
        <gs_endpoint>
            <endpoint>https://storage.googleapis.com</endpoint>
            <access_key_id from_env="GOOGLE_STORAGE_HMAC_KEY_ID"></access_key_id>
            <secret_access_key from_env="GOOGLE_STORAGE_HMAC_KEY_SECRET"></secret_access_key>
        </gs_endpoint>
    </s3>

    <s3queue_log>
        <database>system</database>
        <table>s3queue_log</table>
    </s3queue_log>

    <profiles>
        <default>
            <min_insert_block_size_rows_for_materialized_views>100</min_insert_block_size_rows_for_materialized_views>
            <min_insert_block_size_bytes_for_materialized_views>200</min_insert_block_size_bytes_for_materialized_views>
        </default>
    </profiles>

    <keeper_server>
        <tcp_port>2181</tcp_port>
        <server_id>1</server_id>
        <log_storage_path>keeper/coordination/log</log_storage_path>
        <snapshot_storage_path>keeper/coordination/snapshots</snapshot_storage_path>
        <coordination_settings>
            <operation_timeout_ms>10000</operation_timeout_ms>
            <session_timeout_ms>30000</session_timeout_ms>
            <raft_logs_level>warning</raft_logs_level>
        </coordination_settings>
        <raft_configuration>
            <server>
                <id>1</id>
                <hostname>127.0.0.1</hostname>
                <port>9444</port>
            </server>
        </raft_configuration>
    </keeper_server>
</clickhouse>
